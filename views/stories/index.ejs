<% include ../partials/header %>

<script>
    // init controller
    var controller2 = new ScrollMagic.Controller();
</script>

<div class="container animate4 animated" style="margin-top: 15px; margin-bottom: 90px;">
    <% if(currentUser && currentUser.isAdmin){ %>
        <a href="/stories/new" class="btn btn-outline-primary btn-lg">Add new</a>
    <% } %>
    <div class="header">
        Stories
    </div>
    <p class="header-text">
        Our time in the field gives us a personal view on what it's like to get clean water for the first time. 
        The mothers, children and communities that weâ€™ve met inspire our ideas and, often times, solutions. 
        Every one of them has a story worth sharing.
    </p>
    <hr>
    <% stories.forEach(function(story){ %>
        <div class="row">
            <div class="col-md-3 col-xs-12">
                <img src="<%= story.image %>" class="img-fluid rounded-circle img-size mx-auto d-block">
            </div>
            <div class="col-md-9 col-xs-12">
                <div class="card bg-dark text-white" id="card-grid">
                    <div class="card-header">
                        <a href="/stories/<%= story._id %>">
                            <%= story.title %>
                        </a>
                    </div>
                    <div class="card-body">
                        <p><%- story.content.substring(0,175); %>...</p>
                        <a href="/stories/<%= story._id %>" class="btn btn-outline-info">
                            Read More<i class=""></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    <% }) %>

    <div id="carouselExampleControls" class="animate3 carousel slide animated" data-ride="carousel">
        <ul class="carousel-indicators">
            <li data-target="#carouselExampleControls" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleControls" data-slide-to="1"></li>
            <li data-target="#carouselExampleControls" data-slide-to="2"></li>
            <li data-target="#carouselExampleControls" data-slide-to="3"></li>
            <li data-target="#carouselExampleControls" data-slide-to="4"></li>
        </ul>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block img-fluid" src="/images/quotes/make-difference.jpg" alt="First slide">
            </div>
            <div class="carousel-item">
                <img class="d-block img-fluid" src="/images/quotes/oscar.jpg" alt="Second slide">
            </div>
                    
            <div class="carousel-item">
                <img class="d-block img-fluid" src="/images/quotes/grace.jpg" alt="Third slide">
            </div>
            <div class="carousel-item">
                <img class="d-block img-fluid" src="/images/quotes/anne.jpg" alt="Third slide">
            </div>
            <div class="carousel-item">
                <img class="d-block img-fluid" src="/images/quotes/giving.jpg" alt="Third slide">
            </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>

<script>
    // build scene
    new ScrollMagic.Scene({
        triggerElement: ".animate4",
        triggerHook: "onEnter", // show, when scrolled 10% into view
        duration: "100%", // hide 10% before exiting view (80% + 10% from bottom)
        offset: 50 // move trigger to center of element
    })
    .setClassToggle(".animate4", "zoomIn") // add class to reveal
    .reverse(false)
    .addTo(controller2);
</script>



<% include ../partials/footer %>